library(shiny)
library(shinydashboard)
library(tidyverse)
library(ggplot2)
library(scales)
library(dplR)
library(devtools)
library(DT)
library(lubridate)
library(reshape2)
library(ggpubr)
library(aspace)
library(rsconnect)

x <- "solar-germany-nuts-short.csv"

path_sedn_slpc <- x


# sedn_slpc = SolarEuropeDeutschlandNuts_StandarLastProfilConsumer

sedn_slpc <- read_delim(path_sedn_slpc, delim = ",")
sedn_slpc <- sedn_slpc %>%
  mutate(utc_timestamp = as.POSIXct(utc_timestamp), format = c("%Y-%m-%d %H:%M:%S")) %>% 
  mutate(u1 = utc_timestamp %>% as.character() %>% substr(6, 19))

# Sicherheitsfaktor 95% der voraussichtlichen Leistung - Dies wird pauschal angesetzt.
sf = 1

# Leistungsabnahme des Moduls ueber 20 Jahre durchschnittlich 0,05% = 20 * 0,005% = 10%. Wenn die Abnahme über 20 Jahre 10 % ist, dann kann man den Startwert der Module * 95% rechnen.
module_reduce = 0.95

# Quadratmeter für 1 kWp
m2kwp = 5.2

years = 3

#Losses

anti_reflection_modul = 0.95 # Die Reflektionsverluste entstehen durch Reflektion des Lichts durch das Modul. Diese wird durch eine spezielle Schicht im Modul auc ca.5% reduziert, sodass ein Ertrag von 95% bleibt = 0.95
wechselrichter_wigrad = 0.98 # Der maximale Wirkungsgrad von Wechselrichtern ist 98%. Dies bedeutet, dass 98% des Stroms umgewandelt werden und 2% verloren gehen. F?r die Berechnungen sind pauschal 0.95% anzusetzen. Dies kann beispielsweise durch l?ngere Kabelwege passieren.

#Eigenverbrauch  = consum
#Netzeinspeisung = sale